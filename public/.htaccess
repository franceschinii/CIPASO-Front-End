<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Não reescrever arquivos e pastas reais
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # Não reescrever /uploads/
  RewriteCond %{REQUEST_URI} ^/uploads/ [NC]
  RewriteRule ^ - [L]

  # Reescrever tudo mais para index.html (SPA routing)
  RewriteRule ^ /index.html [QSA,L]
</IfModule>

# Configuração de cache para PDFs
<FilesMatch "\.pdf$">
  Header set Cache-Control "public, max-age=604800"
  Header set Content-Type "application/pdf"
</FilesMatch>

# Habilitar compressão
<IfModule mod_deflate.c>
  AddType application/x-protobuffer .pb
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/xml
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE text/javascript
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/x-protobuffer
  AddOutputFilterByType DEFLATE application/pdf
</IfModule>
